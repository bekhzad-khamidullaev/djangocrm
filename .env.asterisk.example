# ===========================================
# Asterisk Real-time Configuration Example
# ===========================================
# Copy this to your .env file and configure

# ============================================
# Asterisk Database Configuration
# ============================================
# Option 1: Use the same database as Django CRM
# ASTERISK_DB_ENGINE=django.db.backends.postgresql
# ASTERISK_DB_NAME=djangocrm
# ASTERISK_DB_USER=crmuser
# ASTERISK_DB_PASSWORD=your_password
# ASTERISK_DB_HOST=localhost
# ASTERISK_DB_PORT=5432

# Option 2: Use separate database for Asterisk (recommended for production)
ASTERISK_DB_ENGINE=django.db.backends.postgresql
ASTERISK_DB_NAME=asterisk
ASTERISK_DB_USER=asteriskuser
ASTERISK_DB_PASSWORD=asterisk_secure_password
ASTERISK_DB_HOST=localhost
ASTERISK_DB_PORT=5432

# ============================================
# Asterisk AMI (Manager Interface) Settings
# ============================================
ASTERISK_AMI_HOST=127.0.0.1
ASTERISK_AMI_PORT=5038
ASTERISK_AMI_USERNAME=admin
ASTERISK_AMI_SECRET=your_ami_secret_password
ASTERISK_AMI_USE_SSL=False
ASTERISK_AMI_CONNECT_TIMEOUT=5
ASTERISK_AMI_RECONNECT_DELAY=5

# ============================================
# Dialplan Context Settings
# ============================================
# Context for internal calls (between users)
ASTERISK_DEFAULT_CONTEXT=from-internal

# Context for external incoming calls
ASTERISK_EXTERNAL_CONTEXT=from-pstn

# Context for outbound calls
ASTERISK_OUTBOUND_CONTEXT=from-internal-out

# ============================================
# Transport Settings
# ============================================
# Default transport for endpoints
# Options: transport-udp, transport-tcp, transport-tls, transport-wss
ASTERISK_DEFAULT_TRANSPORT=transport-udp

# ============================================
# NAT and Network Settings
# ============================================
# Your server's public IP address (for NAT traversal)
ASTERISK_EXTERNAL_IP=203.0.113.10

# Local network CIDR (calls from this network won't use external IP)
ASTERISK_LOCAL_NET=192.168.0.0/16,10.0.0.0/8

# RTP port range
ASTERISK_RTP_START=10000
ASTERISK_RTP_END=20000

# ============================================
# Codec Settings
# ============================================
# Allowed codecs in priority order (comma-separated)
# Common codecs: ulaw, alaw, gsm, g722, g729, opus, ilbc
ASTERISK_CODECS=ulaw,alaw,gsm,g722,opus

# ============================================
# Auto-Provisioning Settings
# ============================================
# Automatically create SIP endpoints for new users
ASTERISK_AUTO_PROVISION=True

# Starting extension number for auto-provisioning
ASTERISK_START_EXTENSION=1000

# Default password length for auto-generated passwords
ASTERISK_PASSWORD_LENGTH=16

# ============================================
# Recording Settings
# ============================================
# Path to store call recordings
ASTERISK_RECORDINGS_PATH=/var/spool/asterisk/monitor

# Recording format: wav, gsm, mp3 (requires mp3 support)
ASTERISK_RECORDING_FORMAT=wav

# Automatically record all calls
ASTERISK_AUTO_RECORD=False

# Mix both channels into one file
ASTERISK_RECORD_MIX=True

# ============================================
# Queue Settings
# ============================================
# Default queue strategy
# Options: ringall, leastrecent, fewestcalls, random, rrmemory, linear, wrandom
ASTERISK_QUEUE_STRATEGY=ringall

# Maximum time caller waits in queue (seconds)
ASTERISK_QUEUE_TIMEOUT=300

# Time to ring agent before trying next (seconds)
ASTERISK_QUEUE_RING_TIMEOUT=30

# Announce position in queue
ASTERISK_QUEUE_ANNOUNCE_POSITION=yes

# ============================================
# Voicemail Settings
# ============================================
# Enable voicemail
ASTERISK_VOICEMAIL_ENABLED=True

# Voicemail context
ASTERISK_VOICEMAIL_CONTEXT=default

# Email voicemail notifications
ASTERISK_VOICEMAIL_EMAIL=True

# Attach voicemail audio to email
ASTERISK_VOICEMAIL_ATTACH=True

# ============================================
# Security Settings
# ============================================
# Require authentication for endpoints
ASTERISK_REQUIRE_AUTH=True

# Maximum failed authentication attempts
ASTERISK_MAX_AUTH_FAILURES=5

# Ban duration after max failures (seconds)
ASTERISK_AUTH_BAN_DURATION=300

# Enable SRTP media encryption
ASTERISK_ENABLE_SRTP=False

# Require SRTP
ASTERISK_REQUIRE_SRTP=False

# ============================================
# Advanced Settings
# ============================================
# Enable T.38 fax support
ASTERISK_T38_SUPPORT=False

# Enable video calls
ASTERISK_VIDEO_SUPPORT=False

# Maximum concurrent calls per endpoint
ASTERISK_MAX_CALLS_PER_ENDPOINT=2

# Device state busy threshold
ASTERISK_DEVICE_STATE_BUSY_AT=2

# Session timers
ASTERISK_SESSION_TIMERS=yes
ASTERISK_SESSION_TIMER_MIN=90
ASTERISK_SESSION_TIMER_EXPIRES=1800

# Direct media (peer-to-peer RTP)
ASTERISK_DIRECT_MEDIA=no

# DTMF mode: rfc4733, inband, info, auto
ASTERISK_DTMF_MODE=rfc4733

# ============================================
# Logging and Debugging
# ============================================
# Enable verbose PJSIP logging
ASTERISK_PJSIP_DEBUG=False

# Enable AMI event logging
ASTERISK_AMI_DEBUG=False

# ============================================
# Integration Settings
# ============================================
# Automatically sync InternalNumber to Asterisk on save
ASTERISK_AUTO_SYNC=True

# Create dialplan entries automatically
ASTERISK_AUTO_DIALPLAN=True

# Sync routing rules to dialplan
ASTERISK_SYNC_ROUTING=True

# ============================================
# Performance Settings
# ============================================
# Number of worker threads for AMI
ASTERISK_AMI_WORKERS=4

# Connection pool size for database
ASTERISK_DB_POOL_SIZE=10

# Cache endpoint status (seconds)
ASTERISK_CACHE_ENDPOINT_STATUS=30

# ============================================
# Monitoring and Health Checks
# ============================================
# Enable health checks
ASTERISK_HEALTH_CHECK_ENABLED=True

# Health check interval (seconds)
ASTERISK_HEALTH_CHECK_INTERVAL=60

# Alert on AMI disconnect
ASTERISK_ALERT_ON_AMI_DISCONNECT=True

# Alert on database errors
ASTERISK_ALERT_ON_DB_ERROR=True

# ============================================
# WebRTC Settings (for browser-based phones)
# ============================================
# Enable WebSocket transport
ASTERISK_WEBRTC_ENABLED=True

# WebSocket bind address
ASTERISK_WEBRTC_BIND=0.0.0.0:8089

# WebSocket SSL certificate (for WSS)
ASTERISK_WEBRTC_CERT=/etc/asterisk/keys/asterisk.pem
ASTERISK_WEBRTC_KEY=/etc/asterisk/keys/asterisk.key

# Enable ICE support for WebRTC
ASTERISK_ICE_SUPPORT=yes

# STUN server for NAT traversal
ASTERISK_STUN_SERVER=stun.l.google.com:19302

# ============================================
# CDR (Call Detail Records) Settings
# ============================================
# Store CDR in Django database
ASTERISK_CDR_DJANGO=True

# CDR retention period (days, 0 = forever)
ASTERISK_CDR_RETENTION=365

# ============================================
# Notes and Examples
# ============================================
# 
# Example for high-security setup:
# - Use separate database
# - Enable SRTP: ASTERISK_ENABLE_SRTP=True
# - Use TLS transport: ASTERISK_DEFAULT_TRANSPORT=transport-tls
# - Restrict AMI access by IP in manager.conf
#
# Example for WebRTC setup:
# - Enable WebRTC: ASTERISK_WEBRTC_ENABLED=True
# - Use WSS transport: ASTERISK_DEFAULT_TRANSPORT=transport-wss
# - Enable ICE: ASTERISK_ICE_SUPPORT=yes
# - Configure STUN server
#
# Example for call center:
# - Enable recording: ASTERISK_AUTO_RECORD=True
# - Use queue strategy: ASTERISK_QUEUE_STRATEGY=leastrecent
# - Enable voicemail: ASTERISK_VOICEMAIL_ENABLED=True
# - Monitor health: ASTERISK_HEALTH_CHECK_ENABLED=True
